#### 体系结构

Java体系结构包括四个独立但相关的技术：

* Java程序设计语言；
* Java class 文件格式；
* Java 应用编程接口（API）;
* Java 虚拟机；



#### Java 虚拟机：类加载器

![类加载器](I:\GreatGeek\CollectKnowledge\Java相关知识\Java虚拟机相关知识\类加载器.assets\image-20200329210253532.png)

![Java虚拟机的基本结构图](I:\GreatGeek\CollectKnowledge\Java相关知识\Java虚拟机相关知识\类加载器.assets\image-20200329210458069.png)

```Java```虚拟机的主要任务是装载```class```文件并且执行其中的字节码。从上图中可以看到，```Java```虚拟机包含一个类装载器（```class loader```），它可以从程序和 ```API``` 中装载```class```文件。```Java API```中只有程序执行时需要的那些类才会被装载。字节码由执行引擎来执行。



实际在Java虚拟机中，存在着多个类装载器。一个Java应用程序可以使用两种类装载器：“启动”（bootstrap）类装载器和用户定义的类装载器。启动类装载器（这是系统中惟一的）是Java虚拟机实现的一部分。

![image-20200329215659572](I:\GreatGeek\CollectKnowledge\Java相关知识\Java虚拟机相关知识\类加载器.assets\image-20200329215659572.png)

Java应用程序能够在运行时安装用户定义的类装载器，这种类装载器能够使用自定义的方式来装载类，例如，从网络下载class文件。尽管启动类装载器是虚拟机实现的本质部分，而用户定义的类装载器不是；但用户定义的类装载器能够用Java编写，能够被编译为class文件，能够被虚拟机装载，还能够像其他对象一样实例化。它们实际上只是运行中的Java应用程序可执行代码的一部分。

#### Java class 文件

它在平台无关性方面的任务是：为Java程序提供独立于底层主机平台的二进制形式的服务，这正是Java虚拟机所期望实现的。这种途径打破了C或者C++等语言所遵循的传统，使用这些传统语言写的程序通常首先被编译，然后被连接成为单独的、专门支持特定硬件平台和操作系统的二进制文件。通常情况下，一个平台上的二进制可执行文件不能在其他平台上工作。而Java class 文件是可以运行在任何支持Java虚拟机的硬件平台和操作系统上的二进制文件。

除了对平台无关性的支持，Java class 文件还在支持网络移动性的Java体系结构中担当了至关重要的角色。首先，class 文件设计得紧凑，因此它们可以快速地在网络上传送。其次，由于Java 程序是动态连接和动态扩展的，class 文件可以在需要的时候才下载（使用Maven 来管理包依赖的例子）。这个特点使得Java应用程序能够安排从网络上下载class 文件的时间，从而可以最大限度地减少终端用户的等待时间。

#### Java API

Java API 是运行库的集合，它提供一套访问主机系统资源的标准方法。编写Java 程序时，可以假设在任何可运行程序的Java虚拟机上都能够获取Java API class 文件。这是一个相对安全的假设，因为Java虚拟机和Java API class 文件是任何Java平台都要实现的必要部分。运行Java程序时，虚拟机装载程序的class 文件所使用的Java API class 文件。所有被装载的 class 文件（包括从应用程序中和从Java API中提取的）和所有已经装载的动态库（包含本地方法）共同组成了在Java 虚拟机上运动的整个程序。

#### Java 程序设计语言

使用Java 语言编写程序，能够充分利用如下的许多软件技术：

* 面向对象
* 多线程
* 结构化错误处理
* 垃圾回收
* 动态连接
* 动态扩展